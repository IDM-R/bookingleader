<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>BOOKINGBANCHO</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=RocknRoll+One&display=swap" rel="stylesheet">
        <style>
            body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #2c5364 100%);
            color: #fff;
            overflow-x: hidden;
            }
            .reset-btns-fixed {
            position: fixed;
            top: 18px;
            right: 22px;
            z-index: 101;
            display: flex;
            gap: 8px;
            }
            .level-reset-btn, .event-reset-btn {
            background: linear-gradient(90deg, #FFD600 0%, #d32f2f 100%);
            color: #222;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            padding: 4px 10px;
            font-size: 0.95em;
            cursor: pointer;
            box-shadow: 0 0 6px #FFD60044;
            transition: background 0.2s, color 0.2s;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            opacity: 0.88;
            }
            .level-reset-btn:hover, .event-reset-btn:hover {
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            color: #fff;
            opacity: 1;
            }
            .level-area {
            max-width: 900px;
            margin: 30px auto 0 auto;
            background: rgba(30,40,60,0.7);
            border-radius: 16px;
            box-shadow: 0 4px 16px #FFD60044;
            border: 2px solid #FFD600;
            padding: 18px 24px;
            display: flex;
            align-items: center;
            gap: 24px;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            position: relative;
            }
            .level-label {
            font-size: 1.3em;
            color: #FFD600;
            font-weight: bold;
            letter-spacing: 0.08em;
            }
            .xp-bar-bg {
            flex: 1;
            background: #222;
            border-radius: 12px;
            height: 22px;
            margin: 0 10px;
            overflow: hidden;
            position: relative;
            border: 1.5px solid #FFD600;
            }
            .xp-bar-fill {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            height: 100%;
            border-radius: 12px 0 0 12px;
            transition: width 0.4s;
            box-shadow: 0 0 12px #FFD60088;
            }
            .xp-bar-label {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 0; left: 0;
            color: #fff;
            font-size: 1em;
            font-weight: bold;
            text-shadow: 0 0 4px #222;
            line-height: 22px;
            pointer-events: none;
            }
            .participate-btn {
            margin-left: 10px;
            background: linear-gradient(90deg, #00ffe7 0%, #FFD600 100%);
            color: #222;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            padding: 6px 18px;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 0 8px #FFD60044;
            transition: background 0.2s, color 0.2s;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .participate-btn:hover {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            color: #d32f2f;
            }
            .container {
            max-width: 900px;
            margin: 40px auto 0 auto;
            padding: 30px 10px 60px 10px;
            background: rgba(30,40,60,0.7);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(8px);
            border: 2.5px solid #FFD600;
            position: relative;
            }
            .title-main {
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            font-size: 2.5em;
            letter-spacing: 0.13em;
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 60%, #6a82fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 16px #FFD600, 0 0 32px #00ffe7;
            font-weight: bold;
            margin: 0 0 24px 0;
            text-transform: uppercase;
            text-align: center;
            }
            .calendar-area {
            margin-bottom: 30px;
            text-align: center;
            }
            .calendar-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            gap: 20px;
            }
            .calendar-controls button {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            color: #141e30;
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            font-size: 1.8em;
            cursor: pointer;
            box-shadow: 0 0 16px #FFD60044;
            transition: background 0.2s, box-shadow 0.2s;
            }
            .calendar-controls button:hover {
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            box-shadow: 0 0 24px #FFD60088;
            color: #fff;
            }
            .calendar-table {
            border-collapse: separate;
            border-spacing: 8px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            font-size: 1.3em;
            background: rgba(255,255,255,0.04);
            border-radius: 12px;
            box-shadow: 0 4px 16px #FFD60022;
            overflow: hidden;
            }
            .calendar-table th, .calendar-table td {
            width: 13%;
            height: 60px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
            background: rgba(255,255,255,0.07);
            position: relative;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .calendar-table th {
            color: #FFD600;
            font-weight: bold;
            background: transparent;
            border: none;
            font-size: 1.1em;
            letter-spacing: 0.1em;
            box-shadow: none;
            cursor: default;
            }
            .calendar-table td.selected {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            color: #141e30;
            box-shadow: 0 0 16px #FFD600;
            }
            .calendar-table td.today {
            border: 2.5px solid #d32f2f;
            box-shadow: 0 0 8px #d32f2f99;
            }
            .calendar-table td.has-event::after {
            content: '';
            position: absolute;
            bottom: 8px; left: 50%;
            transform: translateX(-50%);
            width: 10px; height: 10px;
            background: #FFD600;
            border-radius: 50%;
            box-shadow: 0 0 8px #FFD600;
            }
            .calendar-table td:empty {
            background: transparent;
            cursor: default;
            box-shadow: none;
            }
            .calendar-table td.disabled-date {
            background: #222 !important;
            color: #888 !important;
            cursor: not-allowed !important;
            opacity: 0.5;
            pointer-events: none;
            box-shadow: none !important;
            }
            .inputs-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 18px;
            margin: 20px 0 10px 0;
            flex-wrap: wrap;
            }
            .inputs-area label {
            font-size: 1.2em;
            color: #FFD600;
            letter-spacing: 0.05em;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .flatpickr-input {
            font-size: 1.3em;
            padding: 8px 18px;
            border-radius: 8px;
            border: 2px solid #FFD600;
            background: rgba(255,255,255,0.15);
            color: #fff;
            outline: none;
            box-shadow: 0 0 8px #FFD60055;
            transition: background 0.2s;
            width: 120px;
            letter-spacing: 0.06em;
            }
            .flatpickr-input:focus {
            background: rgba(0,255,231,0.18);
            }
            .inputs-area button {
            font-size: 1.1em;
            padding: 10px 18px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            color: #141e30;
            font-weight: bold;
            letter-spacing: 0.05em;
            cursor: pointer;
            box-shadow: 0 0 16px #FFD60044;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            transition: background 0.2s, box-shadow 0.2s;
            }
            .inputs-area button:hover {
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            box-shadow: 0 0 24px #FFD60088;
            color: #fff;
            }
            .event-add-area {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            }
            .event-add-area input[type="text"] {
            font-size: 1.2em;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #00ffe7;
            background: rgba(0,255,231,0.1);
            color: #fff;
            outline: none;
            box-shadow: 0 0 8px #00ffe755;
            transition: background 0.2s, border-color 0.2s;
            width: 70%;
            max-width: 300px;
            }
            .event-add-area input[type="text"]:focus {
            background: rgba(0,255,231,0.18);
            border-color: #FFD600;
            }
            .event-add-area button {
            font-size: 1.1em;
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(90deg, #00ffe7 0%, #FFD600 100%);
            color: #141e30;
            font-weight: bold;
            letter-spacing: 0.05em;
            cursor: pointer;
            box-shadow: 0 0 16px #00ffe744;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            transition: background 0.2s, box-shadow 0.2s;
            }
            .event-add-area button:hover {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            box-shadow: 0 0 24px #FFD60088;
            color: #d32f2f;
            }
            .event-list {
            margin: 30px 0 10px 0;
            text-align: center;
            }
            .event-list h2 {
            font-size: 1.3em;
            color: #FFD600;
            letter-spacing: 0.05em;
            margin-bottom: 20px;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .event-list-container { /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã‚³ãƒ³ãƒ†ãƒŠ */
                max-height: 300px; /* æœ€å¤§ã®é«˜ã• */
                overflow-y: auto; /* ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ */
                padding: 10px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                background: rgba(0,0,0,0.2);
                display: flex; /* ã‚¤ãƒ™ãƒ³ãƒˆãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ãŸã‚ */
                flex-wrap: wrap; /* æŠ˜ã‚Šè¿”ã—ã‚’æœ‰åŠ¹ã«ã™ã‚‹ */
                justify-content: center; /* ä¸­å¤®å¯„ã› */
                gap: 10px; /* ãƒœã‚¿ãƒ³é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
            }
            .event-btn {
            font-size: 1.2em;
            margin: 0; /* è¦ªã®gapã§èª¿æ•´ã™ã‚‹ãŸã‚marginã¯0ã« */
            padding: 18px 36px;
            cursor: pointer;
            border-radius: 12px;
            border: none;
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            color: #fff;
            font-weight: bold;
            letter-spacing: 0.05em;
            box-shadow: 0 0 16px #FFD60044;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            outline: none;
            position: relative;
            border: 2px solid #FFD600;
            display: inline-flex; /* Flexbox for inner content */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 180px; /* Adjust as needed */
            }
            .event-btn.custom-event {
                background: linear-gradient(90deg, #00ffe7 0%, #6a82fb 100%); /* Custom event specific background */
                border: 2px solid #00ffe7;
                color: #222;
                box-shadow: 0 0 16px #00ffe744;
            }
            .event-btn.custom-event:hover {
                background: linear-gradient(90deg, #6a82fb 0%, #00ffe7 100%);
                box-shadow: 0 0 24px #00ffe788;
                color: #fff;
            }
            .event-btn.custom-event .event-xp,
            .event-btn.custom-event .event-cancel-fee {
                color: #222;
            }
            .event-btn.custom-event .event-cancel-fee {
                color: #d32f2f;
            }

            .event-btn .event-xp,
            .event-btn .event-cancel-fee {
            display: block;
            font-size: 0.85em;
            font-weight: normal;
            margin-top: 2px;
            color: #FFD600;
            }
            .event-btn .event-cancel-fee {
            color: #62047d;
            }
            .event-btn:hover, .event-btn:focus {
            background: linear-gradient(90deg, #FFD600 0%, #d32f2f 100%);
            box-shadow: 0 0 24px #FFD60088;
            transform: scale(1.07);
            color: #d32f2f;
            }
            .event-btn .event-actions {
                display: flex;
                gap: 8px;
                margin-top: 8px;
            }
            .event-btn .event-actions button {
                font-size: 0.7em;
                padding: 4px 8px;
                border-radius: 5px;
                border: 1px solid #FFD600;
                background: rgba(0,0,0,0.4);
                color: #FFD600;
                cursor: pointer;
                transition: background 0.2s, color 0.2s;
            }
            .event-btn .event-actions button:hover {
                background: #FFD600;
                color: #222;
            }
            /* --- ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆæ¼”å‡º --- */
            .roulette-modal-bg {
            display: none;
            position: fixed;
            z-index: 10002;
            left: 0; top: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.75);
            justify-content: center;
            align-items: center;
            }
            .roulette-modal-bg.active { display: flex; }
            .roulette-modal {
            background: linear-gradient(135deg, #23272b 60%, #FFD600 100%);
            border: 4px solid #FFD600;
            border-radius: 20px;
            color: #fff;
            padding: 40px 38px 32px 32px;
            min-width: 330px;
            max-width: 90vw;
            box-shadow: 0 0 32px #FFD60088, 0 0 8px #d32f2f99;
            text-align: center;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .roulette-title {
            font-size: 1.3em;
            color: #FFD600;
            font-weight: bold;
            margin-bottom: 18px;
            letter-spacing: 0.04em;
            }
            .roulette-list {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 18px;
            margin: 26px 0 16px 0;
            flex-wrap: wrap;
            }
            .roulette-item {
            padding: 16px 22px;
            border-radius: 12px;
            background: #23272b;
            border: 3px solid #FFD600;
            color: #FFD600;
            font-size: 1.1em;
            min-width: 90px;
            min-height: 44px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background 0.2s, color 0.2s, border 0.2s, transform 0.15s;
            box-shadow: 0 0 12px #FFD60044;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .roulette-item.active {
            background: linear-gradient(90deg, #FFD600 0%, #00ffe7 100%);
            color: #d32f2f;
            border: 3px solid #d32f2f;
            transform: scale(1.15);
            box-shadow: 0 0 32px #FFD60088;
            z-index: 2;
            }
            .roulette-item .event-xp,
            .roulette-item .event-cancel-fee {
            font-size: 0.85em;
            font-weight: normal;
            margin-top: 2px;
            color: #FFD600;
            text-shadow: 0 0 4px #222;
            }
            .roulette-item .event-cancel-fee {
            color: #d32f2f;
            }
            .roulette-modal .roulette-final {
            margin-top: 16px;
            font-size: 1.2em;
            color: #FFD600;
            text-shadow: 0 0 8px #d32f2f;
            font-weight: bold;
            }
            .roulette-modal .roulette-close-btn {
            margin-top: 14px;
            background: #FFD600;
            color: #d32f2f;
            border: none;
            border-radius: 10px;
            padding: 10px 28px;
            font-size: 1em;
            cursor: pointer;
            opacity: 0.9;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
            }
            .roulette-modal .roulette-close-btn:hover {
            background: #d32f2f;
            color: #FFD600;
            opacity: 1;
            }
            .registered-list {
            margin: 40px 0 0 0;
            background: rgba(255,255,255,0.06);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 0 8px #FFD60022;
            border: 2px solid #FFD600;
            }
            .registered-list h2 {
            font-size: 1.2em;
            color: #FFD600;
            margin-bottom: 10px;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .registered-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
            }
            .registered-list li {
            font-size: 1.1em;
            margin: 10px 0;
            padding: 10px 0;
            border-bottom: 1px solid #FFD60033;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .registered-list strong {
            color: #d32f2f;
            font-weight: bold;
            letter-spacing: 0.03em;
            }
            .cancel-fee-label {
            color: #d32f2f;
            font-size: 0.92em;
            margin-left: 8px;
            font-weight: bold;
            }
            .cancel-btn {
            color: #fff;
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            border: none;
            border-radius: 8px;
            padding: 7px 20px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 12px #FFD60044;
            position: relative;
            z-index: 1;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            border: 2px solid #FFD600;
            }
            .cancel-btn:hover {
            background: linear-gradient(90deg, #FFD600 0%, #d32f2f 100%);
            box-shadow: 0 0 18px #FFD600aa;
            color: #d32f2f;
            }
            .autocanceled-label {
            color: #FFD600;
            font-weight: bold;
            text-shadow: 0 0 8px #d32f2f;
            margin-left: 8px;
            }
            body, button, input {
            cursor: url('https://cdn.jsdelivr.net/gh/saint11/cursors@master/blue.cur'), auto;
            }
                /* --- è­¦å‘Šãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ»ãƒˆãƒ¼ã‚¹ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³çµ±ä¸€ --- */
            .modal-bg {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0; top: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.85);
            justify-content: center;
            align-items: center;
            }
            .modal-bg.active { display: flex; }
            .modal-danger {
            background: linear-gradient(135deg, #22100e 60%, #d32f2f 100%);
            border: 4px solid #FFD600;
            border-radius: 20px;
            color: #fff;
            padding: 38px 32px 32px 32px;
            min-width: 330px;
            max-width: 90vw;
            box-shadow: 0 0 32px #FFD60088, 0 0 8px #d32f2f99;
            text-align: center;
            position: relative;
            animation: shake 0.6s;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            @keyframes shake {
            0% { transform: translateX(0);}
            20% { transform: translateX(-10px);}
            40% { transform: translateX(10px);}
            60% { transform: translateX(-8px);}
            80% { transform: translateX(8px);}
            100% { transform: translateX(0);}
            }
            .danger-icon {
            font-size: 3.5em;
            color: #FFD600;
            text-shadow: 0 0 18px #FFD600, 0 0 32px #fff, 0 0 8px #d32f2f;
            margin-bottom: 10px;
            animation: pulse 1s infinite alternate;
            }
            @keyframes pulse {
            from { text-shadow: 0 0 18px #FFD600, 0 0 32px #fff;}
            to { text-shadow: 0 0 32px #FFD600, 0 0 48px #fff;}
            }
            .modal-danger h3 {
            font-size: 1.7em;
            color: #FFD600;
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 0.06em;
            text-shadow: 0 0 12px #FFD600, 0 0 6px #d32f2f;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .modal-danger p {
            font-size: 1.15em;
            margin-bottom: 28px;
            color: #fff;
            font-weight: bold;
            line-height: 1.7;
            letter-spacing: 0.01em;
            text-shadow: 0 0 6px #000;
            }
            .modal-danger .danger-cancel-fee {
            color: #FFD600;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 18px;
            display: block;
            text-shadow: 0 0 6px #d32f2f;
            }
            .modal-danger .danger-actions {
            display: flex;
            justify-content: center;
            gap: 24px;
            }
            .danger-confirm {
            background: linear-gradient(90deg, #FFD600 0%, #d32f2f 100%);
            color: #fff;
            font-size: 1.15em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            padding: 14px 36px;
            cursor: pointer;
            box-shadow: 0 0 16px #FFD600aa, 0 0 8px #d32f2f99;
            transition: background 0.2s, box-shadow 0.2s;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .danger-cancel {
            background: #222;
            color: #FFD600;
            font-size: 1.15em;
            border: 2px solid #FFD600;
            border-radius: 10px;
            padding: 14px 36px;
            cursor: pointer;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            transition: background 0.2s, color 0.2s;
            }
            .danger-confirm:hover {
            background: linear-gradient(90deg, #d32f2f 0%, #FFD600 100%);
            color: #FFD600;
            }
            .danger-cancel:hover {
            background: #FFD600;
            color: #d32f2f;
            }
            .bancho-toast {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 50%; top: 18%;
            transform: translateX(-50%);
            min-width: 320px;
            background: linear-gradient(135deg, #23272b 60%, #FFD600 100%);
            color: #fff;
            border-radius: 20px;
            border: 3px solid #FFD600;
            box-shadow: 0 0 32px #FFD60088, 0 0 12px #d32f2f99;
            text-align: center;
            padding: 36px 30px 28px 30px;
            font-size: 1.3em;
            animation: fadeIn 0.4s;
            opacity: 0.98;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            }
            .bancho-toast.show { display: block; }
            .bancho-toast .toast-icon {
            font-size: 2.8em;
            margin-bottom: 12px;
            display: block;
            color: #FFD600;
            text-shadow: 0 0 24px #FFD600, 0 0 12px #d32f2f;
            animation: sad-bounce 1s;
            }
            @keyframes sad-bounce {
            0% { transform: scale(1.3);}
            60% { transform: scale(0.9);}
            100% { transform: scale(1);}
            }
            .bancho-toast .toast-message {
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD600;
            text-shadow: 0 0 8px #d32f2f;
            font-size: 1.1em;
            }
            .bancho-toast .close-toast {
            margin-top: 8px;
            background: #FFD600;
            color: #d32f2f;
            border: none;
            border-radius: 10px;
            padding: 10px 28px;
            font-size: 1em;
            cursor: pointer;
            opacity: 0.9;
            font-family: 'RocknRoll One', 'Orbitron', 'Segoe UI', Arial, sans-serif;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
            }
            .bancho-toast .close-toast:hover {
            background: #d32f2f;
            color: #FFD600;
            opacity: 1;
            }
            @media (max-width: 700px) {
            .container { padding: 10px 2px 40px 2px; }
            .calendar-table { font-size: 1em; }
            .inputs-area { gap: 10px; flex-direction: column; }
            .event-btn { font-size: 1em; padding: 12px 16px; }
            .calendar-table th, .calendar-table td { height: 38px; }
            .reset-btns-fixed { top: 7px; right: 3vw;}
            .modal-danger { min-width: 90vw; padding: 18px 4vw 18px 4vw; }
            .bancho-toast { min-width: 90vw; padding: 18px 4vw 18px 4vw;}
            .roulette-modal { min-width: 90vw; padding: 18px 4vw 18px 4vw;}
            .roulette-list { flex-wrap: wrap; gap: 10px;}
            .roulette-item { min-width: 70px; min-height: 36px; font-size: 1em;}
            }
        </style>
    </head>
    <body>
        <div class="reset-btns-fixed">
            <button class="event-reset-btn" onclick="resetEvents()">ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´ãƒªã‚»ãƒƒãƒˆ</button>
            <button class="level-reset-btn" onclick="resetLevel()">ãƒ¬ãƒ™ãƒ«ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
        <div class="level-area">
            <span class="level-label">ç•ªé•·ãƒ¬ãƒ™ãƒ«</span>
            <div class="xp-bar-bg">
            <div class="xp-bar-fill" id="xpBarFill" style="width:0%"></div>
            <div class="xp-bar-label" id="xpBarLabel"></div>
            </div>
            <span id="levelNum" style="font-size:1.2em;color:#FFD600;font-weight:bold;">Lv.1</span>
        </div>
        <div class="container">
            <div class="title-main">BOOKINGBANCHO</div>
            <div class="calendar-area">
            <div class="calendar-controls">
                <button onclick="prevMonth()">&lt;</button>
                <span id="calendarTitle" style="font-size:1.5em; font-weight:bold; letter-spacing:0.08em;"></span>
                <button onclick="nextMonth()">&gt;</button>
            </div>
            <div id="calendar"></div>
            <div class="inputs-area">
                <label>
                <span>æ™‚åˆ»ã‚’é¸æŠ</span>
                <input id="time" type="text" placeholder="æ™‚åˆ»ã‚’é¸æŠ">
                </label>
                <button onclick="aiRouletteEvent()">AIã«æ±ºã‚ã¦ã‚‚ã‚‰ã†</button>
                <button onclick="showAllEventsList()">è‡ªåˆ†ã§é¸ã¶</button>
            </div>
            </div>
            <div class="event-add-area">
            <input type="text" id="newEventName" placeholder="æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆåã‚’å…¥åŠ›">
            <button onclick="addCustomEvent()">ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ </button>
            </div>
            <div class="event-list" id="eventList">
                <h2>ã‚¤ãƒ™ãƒ³ãƒˆå€™è£œï¼ˆ1ã¤é¸ã‚“ã§ãã‚Œã‚ˆãªï¼‰</h2>
                <div class="event-list-container" id="eventListContainer">
                    </div>
            </div>
            <div class="registered-list" id="registeredList"></div>
        </div>
        <div class="roulette-modal-bg" id="rouletteModalBg">
            <div class="roulette-modal" id="rouletteModal">
            <div class="roulette-title">AIç•ªé•·ãŒã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸ã‚“ã§ã„ã‚‹â€¦</div>
            <div class="roulette-list" id="rouletteList"></div>
            <div class="roulette-final" id="rouletteFinal"></div>
            </div>
        </div>
        <div class="modal-bg" id="dangerModal">
            <div class="modal-danger">
            <div class="danger-icon">ğŸ”¥</div>
            <h3>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¦æœ¬å½“ã«å¤§ä¸ˆå¤«ã‹ï¼Ÿ</h3>
            <span class="danger-cancel-fee" id="dangerCancelFee"></span>
            <p>
                <span style="color:#FFD600; font-size:1.13em;">ã“ã®æ“ä½œã€å†—è«‡ã˜ã‚ƒæ¸ˆã¾ã­ã‡ãï¼</span><br>
                <span style="color:#fff;">ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯<br><b>ç•ªé•·ã®æŸ</b>ã«åã™ã‚‹è¡Œç‚ºã ï¼</span><br>
                <span style="color:#FFD600;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã‚ã‚Šã€‚<br>ã‚ˆãè€ƒãˆã‚ã€ã‚³ãƒ©ï¼</span>
            </p>
            <div class="danger-actions">
                <button class="danger-confirm" id="dangerConfirmBtn">ãã‚Œã§ã‚‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹</button>
                <button class="danger-cancel" id="dangerCancelBtn">ã‚„ã£ã±ã‚„ã‚ã¨ã</button>
            </div>
            </div>
        </div>
        <div class="modal-bg" id="deleteCustomEventModal">
            <div class="modal-danger">
            <div class="danger-icon">ğŸ—‘ï¸</div>
            <h3>æœ¬å½“ã«ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã®ã‹ï¼Ÿ</h3>
            <p>
                <span style="color:#FFD600; font-size:1.13em;">ä¸€åº¦æ¶ˆã—ãŸã‚‰æˆ»ã‚‰ã­ã‡ãï¼</span><br>
                <span style="color:#fff;" id="deleteEventNameConfirm"></span><br>
                <span style="color:#FFD600;">ã‚ˆãè€ƒãˆã‚ã€ã‚³ãƒ©ï¼</span>
            </p>
            <div class="danger-actions">
                <button class="danger-confirm" id="deleteConfirmBtn">ãã‚Œã§ã‚‚å‰Šé™¤ã™ã‚‹</button>
                <button class="danger-cancel" id="deleteCancelBtn">ã‚„ã£ã±ã‚„ã‚ã¨ã</button>
            </div>
            </div>
        </div>
        <div class="bancho-toast" id="banchoToast">
            <div class="toast-icon" id="banchoToastIcon">ğŸ¥²</div>
            <div class="toast-message" id="banchoToastMsg"></div>
            <button class="close-toast" onclick="hideBanchoToast()">é–‰ã˜ã‚‹</button>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
        <script>        
            // Flatpickrã®åˆæœŸåŒ–
            function setupFlatpickr() {
            flatpickr("#time", {
                enableTime: true,
                noCalendar: true,
                dateFormat: "H:i",
                time_24hr: true,
                locale: "ja",
                minuteIncrement: 5,
                allowInput: true
            });
            }
            window.addEventListener("DOMContentLoaded", setupFlatpickr);
            window.addEventListener("pageshow", setupFlatpickr);

            // ã‚¤ãƒ™ãƒ³ãƒˆçµŒé¨“å€¤ï¼†ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ãƒ†ãƒ¼ãƒ–ãƒ« (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã“ã“ã«å®šç¾©)
            // ã“ã“ã«ã€ŒAIã€ã‚„ã€ŒAã€ã¨ã„ã£ãŸåå‰ã‚’ç›´æ¥è¿½åŠ ã—ãªã„ã‚ˆã†ã«æ³¨æ„
            const defaultEventXpTable = {
            "ãƒ©ãƒ³ãƒ": 10, "èª­æ›¸": 15, "æ•£æ­©": 12, "æ˜ ç”»é‘‘è³": 18, "æ–™ç†": 20,
            "ã‚«ãƒ•ã‚§ã§ä¼‘æ†©": 8, "è²·ã„ç‰©": 10, "é‹å‹•": 20, "ãƒ¨ã‚¬": 16, "å‹äººã¨ãŠèŒ¶": 10,
            "ã‚«ãƒ©ã‚ªã‚±": 14, "ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ": 13, "å…¬åœ’ã§ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯": 16, "ç¾è¡“é¤¨ã«è¡Œã": 22,
            "å›³æ›¸é¤¨ã§å‹‰å¼·": 18, "éŸ³æ¥½é‘‘è³": 10, "æ‰‹èŠ¸ãƒ»DIY": 15, "å®¶ã®æƒé™¤": 12,
            "ãŠè“å­ä½œã‚Š": 15, "å†™çœŸæ’®å½±": 14
            };
            const defaultEventCancelFeeTable = {
            "ãƒ©ãƒ³ãƒ": 200, "èª­æ›¸": 100, "æ•£æ­©": 100, "æ˜ ç”»é‘‘è³": 300, "æ–™ç†": 400,
            "ã‚«ãƒ•ã‚§ã§ä¼‘æ†©": 100, "è²·ã„ç‰©": 150, "é‹å‹•": 300, "ãƒ¨ã‚¬": 250, "å‹äººã¨ãŠèŒ¶": 150,
            "ã‚«ãƒ©ã‚ªã‚±": 350, "ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ": 200, "å…¬åœ’ã§ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯": 250, "ç¾è¡“é¤¨ã«è¡Œã": 500,
            "å›³æ›¸é¤¨ã§å‹‰å¼·": 200, "éŸ³æ¥½é‘‘è³": 120, "æ‰‹èŠ¸ãƒ»DIY": 180, "å®¶ã®æƒé™¤": 100,
            "ãŠè“å­ä½œã‚Š": 200, "å†™çœŸæ’®å½±": 180
            };

            let eventXpTable = {}; // å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆXPã‚’ä¿æŒ (å®Ÿè¡Œæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‹ã‚«ã‚¹ã‚¿ãƒ ã§æ§‹ç¯‰ã•ã‚Œã‚‹)
            let eventCancelFeeTable = {}; // å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ã‚’ä¿æŒ (å®Ÿè¡Œæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‹ã‚«ã‚¹ã‚¿ãƒ ã§æ§‹ç¯‰ã•ã‚Œã‚‹)

            const XP_PER_LEVEL = 100;
            let user = JSON.parse(localStorage.getItem('banchoUser') || '{"xp":0,"level":1,"participated":[] }');
            let registeredEvents = JSON.parse(localStorage.getItem('registeredEvents') || '[]');
            let customEvents = JSON.parse(localStorage.getItem('customEvents') || '[]');
            let selectedDate = null;
            let calYear = (new Date()).getFullYear();
            let calMonth = (new Date()).getMonth();
            let cancelIdx = null;
            let deleteCustomEventIndex = null; // å‰Šé™¤ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿æŒ

            // åˆæœŸåŒ–æ™‚ãŠã‚ˆã³ã‚¤ãƒ™ãƒ³ãƒˆå¢—æ¸›æ™‚ã«å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰
            function loadAllEventTables() {
                // ã¾ãšãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
                eventXpTable = { ...defaultEventXpTable };
                eventCancelFeeTable = { ...defaultEventCancelFeeTable };

                // ãã®å¾Œã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¸Šæ›¸ã/è¿½åŠ 
                customEvents.forEach(event => {
                    eventXpTable[event.name] = event.xp;
                    eventCancelFeeTable[event.name] = event.cancelFee;
                });
            }
            loadAllEventTables(); // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ

            // å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒã‚§ãƒƒã‚¯
            function autoCancelExpiredEvents() {
            const now = new Date();
            let changed = false;
            registeredEvents.forEach(ev => {
                if (ev.status === "reserved") {
                const evDate = new Date(ev.date + "T" + ev.time);
                evDate.setMinutes(evDate.getMinutes() + 10);
                if (now > evDate) {
                    ev.status = "autocanceled";
                    changed = true;
                }
                }
            });
            if (changed) {
                localStorage.setItem('registeredEvents', JSON.stringify(registeredEvents));
                showBanchoToast("âš¡", "é–‹å§‹æ™‚åˆ»10åˆ†è¶…éã®ãŸã‚<br><b>ç•ªé•·åˆ¤æ–­ã§å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼</b>");
            }
            }

            function updateLevelUI() {
            document.getElementById('levelNum').textContent = `Lv.${user.level}`;
            const xpThisLevel = user.xp % XP_PER_LEVEL;
            const percent = Math.min(100, (xpThisLevel / XP_PER_LEVEL) * 100);
            document.getElementById('xpBarFill').style.width = percent + '%';
            document.getElementById('xpBarLabel').textContent = `${xpThisLevel} / ${XP_PER_LEVEL} XP`;
            }

            function showBanchoToast(icon, msg, duration=4000) {
            const toast = document.getElementById('banchoToast');
            document.getElementById('banchoToastIcon').textContent = icon;
            document.getElementById('banchoToastMsg').innerHTML = msg;
            toast.classList.add('show');
            toast.style.opacity = 1;
            if (toast._timer) clearTimeout(toast._timer);
            toast._timer = setTimeout(hideBanchoToast, duration);
            }
            function hideBanchoToast() {
            const toast = document.getElementById('banchoToast');
            toast.style.opacity = 0;
            setTimeout(()=>{toast.classList.remove('show');}, 400);
            }

            function addXp(xp, eventName) {
            let beforeLevel = user.level;
            user.xp += xp;
            user.level = Math.floor(user.xp / XP_PER_LEVEL) + 1;
            localStorage.setItem('banchoUser', JSON.stringify(user));
            updateLevelUI();
            if (user.level > beforeLevel) {
                showBanchoToast("ğŸ’¥", `ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼<br>ã€Œ${eventName}ã€ã§${xp}XPç²å¾—<br>ç•ªé•·ãƒ¬ãƒ™ãƒ«ãŒLv.${user.level}ã«ãªã£ãŸï¼`);
            } else {
                showBanchoToast("ğŸ”¥", `ã€Œ${eventName}ã€ã«å‚åŠ ï¼<br>+${xp}XPã‚²ãƒƒãƒˆï¼`);
            }
            }

            function renderCalendar(year, month) {
            const calendarDiv = document.getElementById('calendar');
            const calendarTitle = document.getElementById('calendarTitle');
            calendarDiv.innerHTML = '';
            const today = new Date();
            today.setHours(0,0,0,0);
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const weeks = [];
            let week = [];
            for (let i = 0; i < firstDay.getDay(); i++) week.push('');
            for (let d = 1; d <= lastDay.getDate(); d++) {
                week.push(d);
                if (week.length === 7) {
                weeks.push(week);
                week = [];
                }
            }
            if (week.length > 0) {
                while (week.length < 7) week.push('');
                weeks.push(week);
            }
            let html = '<table class="calendar-table"><tr><th>æ—¥</th><th>æœˆ</th><th>ç«</th><th>æ°´</th><th>æœ¨</th><th>é‡‘</th><th>åœŸ</th></tr>';
            for (const w of weeks) {
                html += '<tr>';
                for (const d of w) {
                let cls = '';
                let dateStr = '';
                let isPast = false;
                if (d) {
                    dateStr = `${year}-${('0'+(month+1)).slice(-2)}-${('0'+d).slice(-2)}`;
                    const cellDate = new Date(year, month, d);
                    cellDate.setHours(0,0,0,0);
                    if (cellDate < today) {
                    cls += ' disabled-date';
                    isPast = true;
                    }
                    if (selectedDate === dateStr) cls += ' selected';
                    if (today.getFullYear() === year && today.getMonth() === month && today.getDate() === d) cls += ' today';
                    if (registeredEvents.some(ev => ev.date === dateStr)) cls += ' has-event';
                    html += `<td class="${cls}" tabindex="${isPast ? '-1' : '0'}" ${isPast ? '' : `onclick="selectDate('${dateStr}')" onkeydown="if(event.key==='Enter'){selectDate('${dateStr}');}"`}>${d}</td>`;
                } else {
                    html += '<td></td>';
                }
                }
                html += '</tr>';
            }
            html += '</table>';
            calendarDiv.innerHTML = html;
            calendarTitle.textContent = `${year}å¹´${month+1}æœˆ`;
            }
            function prevMonth() { calMonth--; if(calMonth<0){calMonth=11;calYear--;} renderCalendar(calYear,calMonth);}
            function nextMonth() { calMonth++; if(calMonth>11){calMonth=0;calYear++;} renderCalendar(calYear,calMonth);}
            function selectDate(dateStr) { selectedDate = dateStr; renderCalendar(calYear, calMonth); }

            function getRandomElements(arr, n) {
            const shuffled = arr.slice().sort(() => 0.5 - Math.random());
            return shuffled.slice(0, n);
            }

            function createGoogleCalUrl(title, date, time) {
            const start = date.replace(/-/g, '') + 'T' + time.replace(':', '') + '00';
            let [h, m] = time.split(':');
            let endH = ('0' + (parseInt(h, 10) + 1)).slice(-2);
            const end = date.replace(/-/g, '') + 'T' + endH + m + '00';
            return `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${start}/${end}`;
            }

            // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆæ¼”å‡ºä»˜ãAIæ±ºå®š
            function aiRouletteEvent() {
            const time = document.getElementById('time').value;
            if (!selectedDate || !time) {
                alert('ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ã¨æ™‚åˆ»ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            const today = new Date();
            today.setHours(0,0,0,0);
            const selDate = new Date(selectedDate);
            selDate.setHours(0,0,0,0);
            if (selDate < today) {
                alert('éå»ã®æ—¥ä»˜ã¯é¸æŠã§ãã¾ã›ã‚“ã€‚');
                return;
            }

            // åˆ©ç”¨å¯èƒ½ãªå…¨ã‚¤ãƒ™ãƒ³ãƒˆåã®ãƒªã‚¹ãƒˆã‚’ä½œæˆï¼ˆé‡è¤‡ãªã—ï¼‰
            const allAvailableEventNames = Array.from(new Set(Object.keys(eventXpTable).filter(name => {
                // ã™ã§ã«ç™»éŒ²æ¸ˆã¿ã§ã¯ãªã„ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚’å€™è£œã«å«ã‚ã‚‹
                return !registeredEvents.some(regEv => regEv.event === name);
            })));

            // 5ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆå€™è£œã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
            const rouletteCandidates = getRandomElements(allAvailableEventNames, 5); 

            if (rouletteCandidates.length === 0) {
                showBanchoToast("ğŸ˜”", "é¸æŠã§ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒãªã„ãœï¼<br>æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã‹ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸ã‚“ã§ãã‚Œï¼");
                return;
            }
            const finalIdx = Math.floor(Math.random() * rouletteCandidates.length);

            // ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
            const modalBg = document.getElementById('rouletteModalBg');
            const rList = document.getElementById('rouletteList');
            const rFinal = document.getElementById('rouletteFinal');
            rFinal.textContent = '';
            rList.innerHTML = '';
            modalBg.classList.add('active');

            // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãƒªã‚¹ãƒˆæç”»
            rouletteCandidates.forEach((event, idx) => {
                const div = document.createElement('div');
                div.className = 'roulette-item' + (idx === 0 ? ' active' : '');
                div.innerHTML = `${event}
                <span class="event-xp">+${eventXpTable[event]}XP</span>
                <span class="event-cancel-fee">ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ï¼š${eventCancelFeeTable[event]}å††</span>`;
                rList.appendChild(div);
            });

            // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            let current = 0;
            let rounds = 0;
            let totalRounds = 18 + finalIdx; // æœ€ä½3å‘¨ï¼‹ãƒ©ãƒ³ãƒ€ãƒ 
            let speed = 80;
            function spin() {
                // remove all active
                for (let i = 0; i < rList.children.length; i++) {
                rList.children[i].classList.remove('active');
                }
                let idx = current % rouletteCandidates.length;
                rList.children[idx].classList.add('active');
                if (rounds < totalRounds) {
                current++;
                rounds++;
                if (rounds > totalRounds - 7) speed += 25; // æ¸›é€Ÿ
                setTimeout(spin, speed);
                } else {
                // æ±ºå®š
                let decidedIdx = totalRounds % rouletteCandidates.length;
                let finalEvent = rouletteCandidates[decidedIdx];
                rFinal.innerHTML = `AIç•ªé•·ãŒé¸ã‚“ã ã‚¤ãƒ™ãƒ³ãƒˆã¯â€¦<br><b>${finalEvent}</b> ã ï¼<br>æ¥½ã—ã‚“ã§ã“ã„ã‚ˆï¼`;

                // 1.5ç§’å¾Œã«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è‡ªå‹•ã§é–‰ã˜ã¦ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²ï¼†Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¿½åŠ 
                setTimeout(() => {
                    modalBg.classList.remove('active');
                    registerEventAndAddToCalendar(finalEvent, selectedDate, time);
                    removeCustomEventFromProposed(finalEvent); // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãªã‚‰ç™»éŒ²å¾Œã«å€™è£œã‹ã‚‰å‰Šé™¤
                    showAllEventsList(); // å€™è£œãƒªã‚¹ãƒˆã‚’æ›´æ–°
                }, 1500);
                }
            }
            spin();
            }

            // ã€Œè‡ªåˆ†ã§é¸ã¶ã€ãƒœã‚¿ãƒ³ã§å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆå€™è£œã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºï¼‰
            function showAllEventsList() {
            const time = document.getElementById('time').value;
            // æ—¥ä»˜ã¨æ™‚åˆ»ãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã‚¢ãƒ©ãƒ¼ãƒˆã‚’å‡ºã™ãŒã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆã¯è¡¨ç¤ºã™ã‚‹
            if (!selectedDate || !time) {
                // alert('ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ã¨æ™‚åˆ»ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'); // ã“ã“ã§ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã‚’å‡ºã•ãªã„
            }
            const today = new Date();
            today.setHours(0,0,0,0);
            const selDate = new Date(selectedDate);
            selDate.setHours(0,0,0,0);
            if (selectedDate && selDate < today) { // selectedDateãŒnullã§ãªã„å ´åˆã®ã¿éå»æ—¥ä»˜ãƒã‚§ãƒƒã‚¯
                alert('éå»ã®æ—¥ä»˜ã¯é¸æŠã§ãã¾ã›ã‚“ã€‚');
                return;
            }

            const eventListContainer = document.getElementById('eventListContainer');
            eventListContainer.innerHTML = ''; // æ—¢å­˜ã®å€™è£œã‚’ã‚¯ãƒªã‚¢

            // åˆ©ç”¨å¯èƒ½ãªå…¨ã‚¤ãƒ™ãƒ³ãƒˆåã®ãƒªã‚¹ãƒˆã‚’ä½œæˆï¼ˆé‡è¤‡ãªã—ï¼‰
            const allAvailableEventNames = Array.from(new Set(Object.keys(eventXpTable).filter(name => {
                // ã™ã§ã«ç™»éŒ²æ¸ˆã¿ã§ã¯ãªã„ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚’å€™è£œã«å«ã‚ã‚‹
                return !registeredEvents.some(regEv => regEv.event === name);
            })));

            allAvailableEventNames.forEach(eventName => {
                const btn = document.createElement('button');
                const isCustom = customEvents.some(ce => ce.name === eventName);
                btn.className = 'event-btn' + (isCustom ? ' custom-event' : '');
                btn.innerHTML = `${eventName}
                <span class="event-xp">+${eventXpTable[eventName]}XP</span>
                <span class="event-cancel-fee">ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ï¼š${eventCancelFeeTable[eventName]}å††</span>`;
                
                if (isCustom) {
                    const customEventIndex = customEvents.findIndex(ce => ce.name === eventName);
                    btn.innerHTML += `
                    <div class="event-actions">
                        <button onclick="event.stopPropagation(); openDeleteCustomEventModal(${customEventIndex});">å‰Šé™¤</button>
                        <button onclick="event.stopPropagation(); editCustomEvent(${customEventIndex});">ç·¨é›†</button>
                    </div>`;
                    // ç·¨é›†ã¨å‰Šé™¤ãƒœã‚¿ãƒ³ã®é †åºã‚’å‰Šé™¤ã‚’å·¦ã«ã—ãŸ
                }
                
                btn.onclick = (e) => {
                // ç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸå ´åˆã¯ã€è¦ªã®ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’åœæ­¢
                if (e.target.tagName === 'BUTTON' && e.target.closest('.event-actions')) {
                    return;
                }
                if (!selectedDate || !time) { // ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²æ™‚ã«å†åº¦æ—¥ä»˜ã¨æ™‚åˆ»ã‚’ãƒã‚§ãƒƒã‚¯
                    alert('ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ã¨æ™‚åˆ»ã‚’é¸æŠã—ã¦ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸ã‚“ã§ãã ã•ã„ã€‚');
                    return;
                }
                registerEventAndAddToCalendar(eventName, selectedDate, time);
                removeCustomEventFromProposed(eventName); // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãªã‚‰ç™»éŒ²å¾Œã«å€™è£œã‹ã‚‰å‰Šé™¤
                showAllEventsList(); // å€™è£œãƒªã‚¹ãƒˆã‚’æ›´æ–°
                };
                eventListContainer.appendChild(btn);
            });
            }


            // ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²ã¨Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¿½åŠ ã‚’ä¸€å…ƒåŒ–
            function registerEventAndAddToCalendar(eventName, date, time) {
                registeredEvents.push({date: date, time: time, event: eventName, status: "reserved"});
                localStorage.setItem('registeredEvents', JSON.stringify(registeredEvents));
                showRegisteredEvents();
                renderCalendar(calYear, calMonth);
                const url = createGoogleCalUrl(eventName, date, time);
                window.open(url, '_blank');
            }

            function participateEvent(idx) {
            const ev = registeredEvents[idx];
            if (!ev || ev.status === "done" || ev.status === "canceled" || ev.status === "autocanceled") return;
            ev.status = "done";
            localStorage.setItem('registeredEvents', JSON.stringify(registeredEvents));
            addXp(eventXpTable[ev.event] || 10, ev.event);
            showRegisteredEvents();
            }

            function showRegisteredEvents() {
            autoCancelExpiredEvents();
            const list = document.getElementById('registeredList');
            if (registeredEvents.length === 0) {
                list.innerHTML = '<h2>ç™»éŒ²æ¸ˆã¿ã‚¤ãƒ™ãƒ³ãƒˆ</h2><p>ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                return;
            }
            let html = '<h2>ç™»éŒ²æ¸ˆã¿ã‚¤ãƒ™ãƒ³ãƒˆ</h2><ul>';
            const now = new Date();
            registeredEvents.forEach((ev, idx) => {
                let statusStr = "";
                if (ev.status === "done") statusStr = ' <span style="color:#00ffe7;">[å‚åŠ æ¸ˆ]</span>';
                if (ev.status === "canceled") statusStr = ' <span style="color:#d32f2f;">[ã‚­ãƒ£ãƒ³ã‚»ãƒ«]</span>';
                if (ev.status === "autocanceled") statusStr = ' <span class="autocanceled-label">[å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«]</span>';
                html += `<li>${ev.date} ${ev.time} <strong>${ev.event}</strong>
                +${eventXpTable[ev.event] || 10}XP
                <span class="cancel-fee-label">ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘:${eventCancelFeeTable[ev.event] || 0}å††</span>
                ${statusStr}`;
                const eventDateTime = new Date(ev.date + "T" + ev.time);
                // å‚åŠ ãƒœã‚¿ãƒ³: statusãŒreservedã‹ã¤ä»ŠãŒã‚¤ãƒ™ãƒ³ãƒˆé–‹å§‹æ™‚åˆ»ä»¥é™ã‹ã¤å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãªã„
                if (ev.status === "reserved" && eventDateTime <= now) {
                html += `<button class="participate-btn" onclick="participateEvent(${idx})">å‚åŠ </button>`;
                }
                // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³: statusãŒreservedãªã‚‰å¸¸ã«è¡¨ç¤º
                if (ev.status === "reserved") {
                html += `<button class="cancel-btn" onclick="openDangerModal(${idx})">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>`;
                }
                html += `</li>`;
            });
            html += '</ul>';
            list.innerHTML = html;
            }

            function openDangerModal(idx) {
            cancelIdx = idx;
            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ã‚‚è¡¨ç¤º
            const ev = registeredEvents[idx];
            document.getElementById('dangerCancelFee').innerHTML =
                `<span>ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ï¼š<b>${eventCancelFeeTable[ev.event] || 0}å††</b></span>`;
            document.getElementById('dangerModal').classList.add('active');
            setTimeout(()=>{document.getElementById('dangerConfirmBtn').focus();}, 100);
            }
            function closeDangerModal() {
            document.getElementById('dangerModal').classList.remove('active');
            cancelIdx = null;
            }
            document.getElementById('dangerCancelBtn').onclick = closeDangerModal;
            document.getElementById('dangerConfirmBtn').onclick = function() {
            if (cancelIdx !== null) {
                const ev = registeredEvents[cancelIdx];
                registeredEvents[cancelIdx].status = "canceled";
                localStorage.setItem('registeredEvents', JSON.stringify(registeredEvents));
                showRegisteredEvents();
                renderCalendar(calYear, calMonth);
                closeDangerModal();
                showBanchoToast("ğŸ¥²", `ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚’ç¢ºå®šã—ã¾ã—ãŸ<br><span style='font-size:0.95em;'>ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ï¼š${eventCancelFeeTable[ev.event] || 0}å††<br>ç•ªé•·ã¯ãŒã£ã‹ã‚Šã—ã¦ã‚‹ãŒã€ã¾ãŸã®ã”åˆ©ç”¨ã‚’å¾…ã£ã¦ã‚‹ãœâ€¦</span>`);
            }
            };

            function resetEvents() {
            if(confirm("æœ¬å½“ã«ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
                registeredEvents = [];
                localStorage.setItem('registeredEvents', JSON.stringify(registeredEvents));
                showRegisteredEvents();
                renderCalendar(calYear, calMonth);
                showBanchoToast("ğŸ—‘ï¸", "ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸãœï¼<br><span style='font-size:0.95em;'>ã¾ãŸæ–°ãŸãªä¼èª¬ã‚’ä½œã‚ã†ã˜ã‚ƒã­ã‡ã‹ï¼</span>");
            }
            }
            function resetLevel() {
            if(confirm("æœ¬å½“ã«ç•ªé•·ãƒ¬ãƒ™ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
                user = {xp:0, level:1, participated:[]};
                localStorage.setItem('banchoUser', JSON.stringify(user));
                updateLevelUI();
                showBanchoToast("ğŸ”„", "ç•ªé•·ãƒ¬ãƒ™ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸãœï¼<br><span style='font-size:0.95em;'>ã¾ãŸã‚¤ãƒã‹ã‚‰æˆã‚Šä¸ŠãŒã‚Œï¼</span>");
            }
            }

            // --- ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆé–¢é€£é–¢æ•° ---
            function addCustomEvent() {
                const newEventNameInput = document.getElementById('newEventName');
                const eventName = newEventNameInput.value.trim();
                if (eventName === "") {
                    showBanchoToast("âš ï¸", "ã‚¤ãƒ™ãƒ³ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã‚Œã‚ˆãªï¼");
                    return;
                }
                // å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆåï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‹ã‚«ã‚¹ã‚¿ãƒ ï¼‰ã¨ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
                if (Object.keys(eventXpTable).includes(eventName)) {
                    showBanchoToast("ğŸ˜…", `ã€Œ${eventName}ã€ã¯æ—¢ã«å­˜åœ¨ã—ã¦ã„ã‚‹ãœï¼<br>åˆ¥ã®åå‰ã«ã—ã¦ãã‚Œï¼`);
                    return;
                }

                // çµŒé¨“å€¤ã¨ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®š
                const xp = Math.floor(Math.random() * 20) + 5; // 5ï½24XP
                const cancelFee = Math.floor(Math.random() * 400) + 100; // 100ï½499å††

                const newCustomEvent = { name: eventName, xp: xp, cancelFee: cancelFee };
                customEvents.push(newCustomEvent);
                localStorage.setItem('customEvents', JSON.stringify(customEvents));
                loadAllEventTables(); // å…¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†æ§‹ç¯‰ã—ã¦æ–°ã—ã„ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’åæ˜ 
                newEventNameInput.value = ''; // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢

                showBanchoToast("ğŸ‰", `ã€Œ${eventName}ã€ã‚’è¿½åŠ ã—ãŸãœï¼<br>XP: ${xp}, ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™é‡‘: ${cancelFee}å††`);
                showAllEventsList(); // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆã‚’æ›´æ–°ã—ã¦è¡¨ç¤º
            }

            function editCustomEvent(index) {
                const eventToEdit = customEvents[index];
                const newName = prompt(`ã€Œ${eventToEdit.name}ã€ã‚’æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆåã«ç·¨é›†ã™ã‚‹ãœï¼å…¥åŠ›ã—ã‚ï¼`, eventToEdit.name);
                if (newName === null || newName.trim() === "") {
                    return; // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¾ãŸã¯ç©ºå…¥åŠ›
                }
                const trimmedNewName = newName.trim();
                if (trimmedNewName === eventToEdit.name) {
                    showBanchoToast("ğŸ¤”", "å¤‰æ›´ã•ã‚Œã¦ã­ã‡ã˜ã‚ƒã­ã‡ã‹ï¼<br>åŒã˜åå‰ã ãœï¼");
                    return;
                }
                // æ–°ã—ã„åå‰ãŒä»–ã®ã‚¤ãƒ™ãƒ³ãƒˆåï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå«ã‚€ï¼‰ã¨é‡è¤‡ã—ãªã„ã‹ãƒã‚§ãƒƒã‚¯
                // ãŸã ã—ã€è‡ªåˆ†è‡ªèº«ï¼ˆç·¨é›†å¯¾è±¡ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã®åå‰ã¯é™¤å¤–ã—ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹
                if (Object.keys(eventXpTable).some(name => name === trimmedNewName && name !== eventToEdit.name)) {
                    showBanchoToast("ğŸ˜…", `ã€Œ${trimmedNewName}ã€ã¯æ—¢ã«å­˜åœ¨ã—ã¦ã„ã‚‹ãœï¼<br>åˆ¥ã®åå‰ã«ã—ã¦ãã‚Œï¼`);
                    return;
                }

                // customEventsé…åˆ—ã‚’æ›´æ–°
                eventToEdit.name = trimmedNewName;
                localStorage.setItem('customEvents', JSON.stringify(customEvents));
                loadAllEventTables(); // å…¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†æ§‹ç¯‰ã—ã¦å¤‰æ›´ã‚’åæ˜ 
                
                showBanchoToast("âœï¸", `ã€Œ${trimmedNewName}ã€ã«ç·¨é›†ã—ãŸãœï¼`);
                showAllEventsList(); // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆã‚’æ›´æ–°ã—ã¦è¡¨ç¤º
            }
            
            // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            function openDeleteCustomEventModal(index) {
                deleteCustomEventIndex = index;
                const eventToDeleteName = customEvents[index].name;
                document.getElementById('deleteEventNameConfirm').textContent = `ã€Œ${eventToDeleteName}ã€ã‚’å‰Šé™¤ã™ã‚‹ãã€‚`;
                document.getElementById('deleteCustomEventModal').classList.add('active');
                setTimeout(()=>{document.getElementById('deleteConfirmBtn').focus();}, 100);
            }

            // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            function closeDeleteCustomEventModal() {
                document.getElementById('deleteCustomEventModal').classList.remove('active');
                deleteCustomEventIndex = null;
            }

            // ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆå‰Šé™¤å®Ÿè¡Œ
            document.getElementById('deleteCancelBtn').onclick = closeDeleteCustomEventModal;
            document.getElementById('deleteConfirmBtn').onclick = function() {
                if (deleteCustomEventIndex !== null) {
                    const eventToDeleteName = customEvents[deleteCustomEventIndex].name;

                    // customEventsé…åˆ—ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤
                    customEvents.splice(deleteCustomEventIndex, 1);
                    localStorage.setItem('customEvents', JSON.stringify(customEvents));
                    loadAllEventTables(); // å…¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†æ§‹ç¯‰ã—ã¦å‰Šé™¤ã‚’åæ˜ 

                    showBanchoToast("ğŸ—‘ï¸", `ã€Œ${eventToDeleteName}ã€ã‚’å‰Šé™¤ã—ãŸãœï¼<br>ã“ã‚Œã§ã‚¹ãƒƒã‚­ãƒªã—ãŸã ã‚ï¼Ÿ`);
                    showAllEventsList(); // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆã‚’æ›´æ–°ã—ã¦è¡¨ç¤º
                    closeDeleteCustomEventModal();
                }
            };

            // ã‚¤ãƒ™ãƒ³ãƒˆãŒé¸æŠã•ã‚ŒãŸã‚‰ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã™ã‚‹é–¢æ•°
            function removeCustomEventFromProposed(eventName) {
                const initialCustomEventCount = customEvents.length;
                // customEventsã‹ã‚‰è©²å½“ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤ (ã‚‚ã—ã‚ã‚Œã°)
                customEvents = customEvents.filter(event => event.name !== eventName);
                if (customEvents.length < initialCustomEventCount) {
                    localStorage.setItem('customEvents', JSON.stringify(customEvents));
                    loadAllEventTables(); // å…¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†æ§‹ç¯‰ã—ã¦ã€å‰Šé™¤ã•ã‚ŒãŸã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãŒå€™è£œã‹ã‚‰æ¶ˆãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
                }
            }


            // åˆæœŸåŒ–æ™‚ã«å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒã‚§ãƒƒã‚¯
            autoCancelExpiredEvents();
            updateLevelUI();
            renderCalendar(calYear, calMonth);
            showRegisteredEvents();
            showAllEventsList(); // åˆæœŸè¡¨ç¤ºæ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆå€™è£œã‚‚è¡¨ç¤ºã™ã‚‹

            // å®šæœŸçš„ã«å¼·åˆ¶ã‚­ãƒ£ãƒ³ã‚»ãƒ«åˆ¤å®šï¼ˆ1åˆ†ã”ã¨ï¼‰
            setInterval(() => {
            autoCancelExpiredEvents();
            showRegisteredEvents();
            }, 60000);

            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹ã™ã‚‹é–¢æ•°
            window.participateEvent = participateEvent;
            window.openDangerModal = openDangerModal;
            window.resetEvents = resetEvents;
            window.resetLevel = resetLevel;
            window.aiRouletteEvent = aiRouletteEvent;
            window.showAllEventsList = showAllEventsList; 
            window.addCustomEvent = addCustomEvent;
            window.editCustomEvent = editCustomEvent;
            window.deleteCustomEvent = deleteCustomEvent; // ç›´æ¥å‘¼ã³å‡ºã™ã“ã¨ã¯æ¸›ã‚‹ãŒã€æ®‹ã—ã¦ãŠã
            window.openDeleteCustomEventModal = openDeleteCustomEventModal; // æ–°ã—ãå…¬é–‹
        </script>
    </body>
</html>